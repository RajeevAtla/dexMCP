name: lint

on: [push]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
      with:
        fetch-depth: 0
        submodules: recursive

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: "3.11"

    - name: Set up uv
      uses: astral-sh/setup-uv@v7
      with:
        python-version: "3.13"
        activate-environment: "true"
        enable-cache: "true"
        restore-cache: "true"
        save-cache: "true"
        cache-python: "true"

    - name: Install dev dependencies
      run: uv sync --group dev

    - name: Lint
      run: |
        uv run rumdl fmt --disable=MD033
        uv run ruff check dspy_client.py
        uv run ruff check langchain_client.py
        uv run ruff check dexmcp/dexmcp_server.py
